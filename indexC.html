<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    body {
      background-color: blue;
      text-align: center; 
    }
    #map { height: 400px; }
        .question-container { display: none; margin-top: 20px; }    
    </style>
    <title>Crear Marcadores</title>
</head>
<body style>
    <h1>Crear Marcadores</h1>
    <form id="markerForm">
        <label for="title">Título del lugar:</label>
        <input type="text" id="title" required><br>

        <label for="description">Descripción breve:</label>
        <input type="text" id="description" required><br>

        <label for="question">Pregunta tipo test:</label>
        <input type="text" id="question" required><br>

        <label for="option1">Opción 1:</label>
        <input type="text" id="option1" required><br>
        <label for="option2">Opción 2:</label>
        <input type="text" id="option2" required><br>
        <label for="option3">Opción 3:</label>
        <input type="text" id="option3" required><br>
        <label for="option4">Opción 4:</label>
        <input type="text" id="option4" required><br>

        <label for="correctOption">Selecciona la opción correcta:</label>
        <select id="correctOption" required>
            <option value="1">Opción 1</option>
            <option value="2">Opción 2</option>
            <option value="3">Opción 3</option>
            <option value="4">Opción 4</option>
        </select><br>

        <label for="lat">Latitud:</label>
        <input type="number" id="lat" step="0.000001" required><br>
        <label for="lng">Longitud:</label>
        <input type="number" id="lng" step="0.000001" required><br>

        <button type="submit">Crear Marcador</button>
    </form>

    <button id="exportButton">Exportar Marcadores</button>

    <script>
        const map = L.map('map').setView([41.50580, -5.74567], 16);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);
        
        const markersData = [];

        document.getElementById('markerForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const question = document.getElementById('question').value;
            const options = [
                document.getElementById('option1').value,
                document.getElementById('option2').value,
                document.getElementById('option3').value,
                document.getElementById('option4').value
            ];
            const correctOption = document.getElementById('correctOption').value;
            const lat = parseFloat(document.getElementById('lat').value);
            const lng = parseFloat(document.getElementById('lng').value);

            // Añadir el marcador al array
            markersData.push({ title, description, question, options, correctOption, lat, lng });

            // Limpiar el formulario
            this.reset();
        });

        document.getElementById('exportButton').addEventListener('click', function() {
            const json = JSON.stringify(markersData, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'marcadores.json';
            a.click();
            URL.revokeObjectURL(url);
        });
    </script>
</body>
</html>
